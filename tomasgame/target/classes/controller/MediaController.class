// Source code is decompiled from a .class file using FernFlower decompiler (from Intellij IDEA).
package controller;

import java.awt.Component;
import java.io.File;
import java.io.IOException;
import java.net.URL;
import java.util.ResourceBundle;
import javafx.fxml.FXML;
import javafx.fxml.FXMLLoader;
import javafx.fxml.Initializable;
import javafx.scene.Parent;
import javafx.scene.Scene;
import javafx.scene.input.KeyEvent;
import javafx.scene.input.MouseEvent;
import javafx.scene.media.Media;
import javafx.scene.media.MediaPlayer;
import javafx.scene.media.MediaView;
import javafx.stage.Stage;
import javax.swing.JOptionPane;

public class MediaController implements Initializable {
   @FXML
   private MediaView mediaView;
   private File videoFile;
   private Media videoMedia;
   private MediaPlayer videoPlayer;
   private File audioFile;
   private Media audioMedia;
   private MediaPlayer audioPlayer;

   public MediaController() {
   }

   public void initialize(URL arg0, ResourceBundle arg1) {
      try {
         this.videoFile = new File("src/main/java/assets/Vidio.mp4");
         if (!this.videoFile.exists()) {
            throw new IOException("Video file not found: " + this.videoFile.getPath());
         }

         this.videoMedia = new Media(this.videoFile.toURI().toString());
         this.videoPlayer = new MediaPlayer(this.videoMedia);
         this.mediaView.setMediaPlayer(this.videoPlayer);
         this.videoPlayer.play();
         this.audioFile = new File("src/main/java/assets/media.mp3");
         if (!this.audioFile.exists()) {
            throw new IOException("Audio file not found: " + this.audioFile.getPath());
         }

         this.audioMedia = new Media(this.audioFile.toURI().toString());
         this.audioPlayer = new MediaPlayer(this.audioMedia);
         this.audioPlayer.play();
      } catch (Exception var4) {
         var4.printStackTrace();
         JOptionPane.showMessageDialog((Component)null, "Error initializing media: " + var4.getMessage());
      }

   }

   @FXML
   private void handleLogin(MouseEvent event) {
      this.navigateToLogin();
   }

   @FXML
   private void handleLogin(KeyEvent event) {
      this.navigateToLogin();
   }

   private void navigateToLogin() {
      try {
         if (this.videoPlayer != null) {
            this.videoPlayer.stop();
         }

         if (this.audioPlayer != null) {
            this.audioPlayer.stop();
         }

         URL url = (new File("src/main/java/view/Login.fxml")).toURI().toURL();
         Parent root = (Parent)FXMLLoader.load(url);
         Stage stage = (Stage)this.mediaView.getScene().getWindow();
         Scene scene = new Scene(root);
         stage.setScene(scene);
         stage.show();
      } catch (IOException var5) {
         var5.printStackTrace();
         JOptionPane.showMessageDialog((Component)null, "Gagal memuat halaman login. Periksa file FXML Anda!");
      }

   }
}
